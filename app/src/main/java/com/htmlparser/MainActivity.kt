package com.htmlparser

import androidx.appcompat.app.AppCompatActivity
import android.os.Bundle
import android.util.Log
import com.htmlparser.adapter.ArticleAdapter
import com.htmlparser.elements.*
import com.htmlparser.source.StringSource
import kotlinx.android.synthetic.main.activity_main.*

class MainActivity : AppCompatActivity() {
    private val TAG = "MainActivity"
    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        setContentView(R.layout.activity_main)

        Log.d(TAG, "onCreate: hi")


        val source = """
            <figure id="attachment_60623" class="wp-caption alignnone"><a href="https://egyptianstreets.com/wp-content/uploads/2020/05/EY8WZkJXgAMh4K1.jpg"><img class="size-full wp-image-60623" src="https://egyptianstreets.com/wp-content/uploads/2020/05/EY8WZkJXgAMh4K1.jpg" alt="" width="1080" height="646" srcset="https://egyptianstreets.com/wp-content/uploads/2020/05/EY8WZkJXgAMh4K1.jpg 1080w, https://egyptianstreets.com/wp-content/uploads/2020/05/EY8WZkJXgAMh4K1-300x179.jpg 300w, https://egyptianstreets.com/wp-content/uploads/2020/05/EY8WZkJXgAMh4K1-768x459.jpg 768w, https://egyptianstreets.com/wp-content/uploads/2020/05/EY8WZkJXgAMh4K1-1024x613.jpg 1024w, https://egyptianstreets.com/wp-content/uploads/2020/05/EY8WZkJXgAMh4K1-400x240.jpg 400w" sizes="(max-width: 1080px) 100vw, 1080px" /></a><figcaption class="wp-caption-text">A view from a window in Amman, Jorden. Photo courtesy of Leen Qatuni.</figcaption></figure> <p>The three days of Eid have come to a end, and Muslims around the world have found ways to celebrate under the shadow of the coronavirus pandemic. Eid Al-Fitr, the feast after the holy month of Ramadan is a special time for Muslims around the world, where they gather with family and friends, and enjoy traditional sweets.</p> <p>We asked different people living in different places to show us how they managed to experience the festivities, how they managed to gather without meeting and celebrate without gathering. From home cooking to video calls to at-home weddings, here are personal photographs of this year&#8217;s Eid.</p> <p><a href="https://egyptianstreets.com/wp-content/uploads/2020/05/C12C7278-7003-483A-AE73-4873CFB1D683.jpeg"><img class="size-full wp-image-60630" src="https://egyptianstreets.com/wp-content/uploads/2020/05/C12C7278-7003-483A-AE73-4873CFB1D683.jpeg" alt="" width="3024" height="4032" srcset="https://egyptianstreets.com/wp-content/uploads/2020/05/C12C7278-7003-483A-AE73-4873CFB1D683.jpeg 3024w, https://egyptianstreets.com/wp-content/uploads/2020/05/C12C7278-7003-483A-AE73-4873CFB1D683-225x300.jpeg 225w, https://egyptianstreets.com/wp-content/uploads/2020/05/C12C7278-7003-483A-AE73-4873CFB1D683-768x1024.jpeg 768w" sizes="(max-width: 3024px) 100vw, 3024px" /></a><br /> A view of the thin crescent moon on the first day of Eid Al-Fitr over London, England. Photo courtesy of Zeineldin Elkhabiry.</p> <p>&nbsp;</p> <p><a href="https://egyptianstreets.com/wp-content/uploads/2020/05/IMG-8974.jpg"><img class="size-full wp-image-60629" src="https://egyptianstreets.com/wp-content/uploads/2020/05/IMG-8974.jpg" alt="" width="879" height="1000" srcset="https://egyptianstreets.com/wp-content/uploads/2020/05/IMG-8974.jpg 879w, https://egyptianstreets.com/wp-content/uploads/2020/05/IMG-8974-264x300.jpg 264w, https://egyptianstreets.com/wp-content/uploads/2020/05/IMG-8974-768x874.jpg 768w" sizes="(max-width: 879px) 100vw, 879px" /></a><br /> Ready for baking in Cairo. Raw Ghorayyeba lined up on a baking sheet. Photo courtesy of Yasmin Ahmed Helmy.</p> <p>&nbsp;</p> <p><a href="https://egyptianstreets.com/wp-content/uploads/2020/05/6f24d0bd-f8a7-40af-8c9f-6e272d66e11e111.jpg"><img class="size-full wp-image-60639" src="https://egyptianstreets.com/wp-content/uploads/2020/05/6f24d0bd-f8a7-40af-8c9f-6e272d66e11e111.jpg" alt="" width="763" height="780" srcset="https://egyptianstreets.com/wp-content/uploads/2020/05/6f24d0bd-f8a7-40af-8c9f-6e272d66e11e111.jpg 763w, https://egyptianstreets.com/wp-content/uploads/2020/05/6f24d0bd-f8a7-40af-8c9f-6e272d66e11e111-293x300.jpg 293w" sizes="(max-width: 763px) 100vw, 763px" /></a><br /> Kahk and coffee on the first morning after Ramadan are an unmatched experience, even on the other side of the world, beyond the Andes. Photo courtesy of Amal Mourad, Santiago, Chile.</p> <p>&nbsp;</p> <p><a href="https://egyptianstreets.com/wp-content/uploads/2020/05/CA9DF2F9-7B53-4567-8459-7C13A5620F15.jpeg"><img class="size-full wp-image-60620" src="https://egyptianstreets.com/wp-content/uploads/2020/05/CA9DF2F9-7B53-4567-8459-7C13A5620F15.jpeg" alt="" width="1536" height="2048" srcset="https://egyptianstreets.com/wp-content/uploads/2020/05/CA9DF2F9-7B53-4567-8459-7C13A5620F15.jpeg 1536w, https://egyptianstreets.com/wp-content/uploads/2020/05/CA9DF2F9-7B53-4567-8459-7C13A5620F15-225x300.jpeg 225w, https://egyptianstreets.com/wp-content/uploads/2020/05/CA9DF2F9-7B53-4567-8459-7C13A5620F15-768x1024.jpeg 768w" sizes="(max-width: 1536px) 100vw, 1536px" /></a><br /> Roaming the empty neighbourhood in curfew-time Cairo. Photo courtesy of Fatma Eita.</p> <p>&nbsp;</p> <p><a href="https://egyptianstreets.com/wp-content/uploads/2020/05/zamalek.jpg"><img class="size-full wp-image-60631" src="https://egyptianstreets.com/wp-content/uploads/2020/05/zamalek.jpg" alt="" width="1303" height="1183" srcset="https://egyptianstreets.com/wp-content/uploads/2020/05/zamalek.jpg 1303w, https://egyptianstreets.com/wp-content/uploads/2020/05/zamalek-300x272.jpg 300w, https://egyptianstreets.com/wp-content/uploads/2020/05/zamalek-768x697.jpg 768w, https://egyptianstreets.com/wp-content/uploads/2020/05/zamalek-1024x930.jpg 1024w" sizes="(max-width: 1303px) 100vw, 1303px" /></a><br /> Deserted Zamalek streets in broad daylight during Eid Al-Fitr. Photo courtesy of Kim Fox.</p> <p>&nbsp;</p> <p><a href="https://egyptianstreets.com/wp-content/uploads/2020/05/83dacce6-3599-4127-95bf-9bc5a060dc2a.jpg"><img class="size-full wp-image-60628" src="https://egyptianstreets.com/wp-content/uploads/2020/05/83dacce6-3599-4127-95bf-9bc5a060dc2a.jpg" alt="" width="876" height="1014" srcset="https://egyptianstreets.com/wp-content/uploads/2020/05/83dacce6-3599-4127-95bf-9bc5a060dc2a.jpg 876w, https://egyptianstreets.com/wp-content/uploads/2020/05/83dacce6-3599-4127-95bf-9bc5a060dc2a-259x300.jpg 259w, https://egyptianstreets.com/wp-content/uploads/2020/05/83dacce6-3599-4127-95bf-9bc5a060dc2a-768x889.jpg 768w" sizes="(max-width: 876px) 100vw, 876px" /></a><br /> Love always finds a way. Soraya and Seif didn&#8217;t let COVID-19 stop them from tying the knot at home during Eid. With just a few family members it was no big white wedding, but it&#8217;s a story they will always be able to tell. Photo courtesy of Tawfik Mohamed.</p> <p>&nbsp;</p> <p><a href="https://egyptianstreets.com/wp-content/uploads/2020/05/IMG-8963.jpg"><img class="size-full wp-image-60618" src="https://egyptianstreets.com/wp-content/uploads/2020/05/IMG-8963.jpg" alt="" width="1536" height="2048" srcset="https://egyptianstreets.com/wp-content/uploads/2020/05/IMG-8963.jpg 1536w, https://egyptianstreets.com/wp-content/uploads/2020/05/IMG-8963-225x300.jpg 225w, https://egyptianstreets.com/wp-content/uploads/2020/05/IMG-8963-768x1024.jpg 768w" sizes="(max-width: 1536px) 100vw, 1536px" /></a><br /> &#8220;It&#8217;s our first Eid together.&#8221; Ahmed and Hagar brought Kahk and &#8220;Sokk &#8216;Ala Banatak&#8221; to Rotterdam. Photo courtesy of Ahmed Saeed.</p> <p>&nbsp;</p> <p><a href="https://egyptianstreets.com/wp-content/uploads/2020/05/EY8e266XsAIPUPl.jpg"><img class="size-full wp-image-60622" src="https://egyptianstreets.com/wp-content/uploads/2020/05/EY8e266XsAIPUPl.jpg" alt="" width="768" height="1024" srcset="https://egyptianstreets.com/wp-content/uploads/2020/05/EY8e266XsAIPUPl.jpg 768w, https://egyptianstreets.com/wp-content/uploads/2020/05/EY8e266XsAIPUPl-225x300.jpg 225w" sizes="(max-width: 768px) 100vw, 768px" /></a><br /> Laura and her family made the best out of their Eid in lockdown in Juffair, Bahrain by playing games. Photo courtesy of Laura El-Barshoumy.</p> <p>&nbsp;</p> <p><a href="https://egyptianstreets.com/wp-content/uploads/2020/05/5528779F-A254-4F7E-AFC2-0691475998B8.jpeg"><img class="size-full wp-image-60626" src="https://egyptianstreets.com/wp-content/uploads/2020/05/5528779F-A254-4F7E-AFC2-0691475998B8.jpeg" alt="" width="1797" height="1106" srcset="https://egyptianstreets.com/wp-content/uploads/2020/05/5528779F-A254-4F7E-AFC2-0691475998B8.jpeg 1797w, https://egyptianstreets.com/wp-content/uploads/2020/05/5528779F-A254-4F7E-AFC2-0691475998B8-300x185.jpeg 300w, https://egyptianstreets.com/wp-content/uploads/2020/05/5528779F-A254-4F7E-AFC2-0691475998B8-768x473.jpeg 768w, https://egyptianstreets.com/wp-content/uploads/2020/05/5528779F-A254-4F7E-AFC2-0691475998B8-1024x630.jpeg 1024w" sizes="(max-width: 1797px) 100vw, 1797px" /></a><br /> Eid holidays in a hotel resort? Yes please! Omar spent the three days of Eid with his friends in a hotel in Dubai, UAE observing social distancing rules on the beaches and inside. Photo courtesy of Omar Aboulkassem.</p> <p>&nbsp;</p> <p><a href="https://egyptianstreets.com/wp-content/uploads/2020/05/2A138A3F-E390-498F-BD3B-E91BBD007413.jpeg"><img class="size-full wp-image-60625" src="https://egyptianstreets.com/wp-content/uploads/2020/05/2A138A3F-E390-498F-BD3B-E91BBD007413.jpeg" alt="" width="1056" height="2047" srcset="https://egyptianstreets.com/wp-content/uploads/2020/05/2A138A3F-E390-498F-BD3B-E91BBD007413.jpeg 1056w, https://egyptianstreets.com/wp-content/uploads/2020/05/2A138A3F-E390-498F-BD3B-E91BBD007413-155x300.jpeg 155w, https://egyptianstreets.com/wp-content/uploads/2020/05/2A138A3F-E390-498F-BD3B-E91BBD007413-768x1489.jpeg 768w, https://egyptianstreets.com/wp-content/uploads/2020/05/2A138A3F-E390-498F-BD3B-E91BBD007413-528x1024.jpeg 528w" sizes="(max-width: 1056px) 100vw, 1056px" /></a><br /> Eid or not, hospital workers toil tirelessly to keep you safe. Photo courtesy of Nour Raafat in Ismailia, Egypt.</p> <p>&nbsp;</p> <p><a href="https://egyptianstreets.com/wp-content/uploads/2020/05/IMG-8969.jpg"><img class="size-full wp-image-60621" src="https://egyptianstreets.com/wp-content/uploads/2020/05/IMG-8969.jpg" alt="" width="1536" height="2048" srcset="https://egyptianstreets.com/wp-content/uploads/2020/05/IMG-8969.jpg 1536w, https://egyptianstreets.com/wp-content/uploads/2020/05/IMG-8969-225x300.jpg 225w, https://egyptianstreets.com/wp-content/uploads/2020/05/IMG-8969-768x1024.jpg 768w" sizes="(max-width: 1536px) 100vw, 1536px" /></a><br /> Bringing work to holidays. Ibrahim is self-isolating on the Egyptian North Coast with his work. Photo courtesy of Ibrahim El-Sennary.</p> <p>&nbsp;</p> <p><a href="https://egyptianstreets.com/wp-content/uploads/2020/05/IMG_2350.jpeg"><img class="size-full wp-image-60619" src="https://egyptianstreets.com/wp-content/uploads/2020/05/IMG_2350.jpeg" alt="" width="1280" height="960" srcset="https://egyptianstreets.com/wp-content/uploads/2020/05/IMG_2350.jpeg 1280w, https://egyptianstreets.com/wp-content/uploads/2020/05/IMG_2350-300x225.jpeg 300w, https://egyptianstreets.com/wp-content/uploads/2020/05/IMG_2350-768x576.jpeg 768w, https://egyptianstreets.com/wp-content/uploads/2020/05/IMG_2350-1024x768.jpeg 1024w" sizes="(max-width: 1280px) 100vw, 1280px" /></a><br /> Students abroad get no rest. Dalia&#8217;s work on her thesis is keeping her company during Eid in Aachen, Germany. Photo courtesy of Dalia Assaker.</p> <p>&nbsp;</p> <p><a href="https://egyptianstreets.com/wp-content/uploads/2020/05/IMG-8961.jpg"><img class="size-full wp-image-60617" src="https://egyptianstreets.com/wp-content/uploads/2020/05/IMG-8961.jpg" alt="" width="864" height="1152" srcset="https://egyptianstreets.com/wp-content/uploads/2020/05/IMG-8961.jpg 864w, https://egyptianstreets.com/wp-content/uploads/2020/05/IMG-8961-225x300.jpg 225w, https://egyptianstreets.com/wp-content/uploads/2020/05/IMG-8961-768x1024.jpg 768w" sizes="(max-width: 864px) 100vw, 864px" /></a><br /> Eid decorations on her Oakville, Canada front door remind Aamenah of the festivities, even when it&#8217;s all from home. Photo courtesy of Aamenah Elsherif.</p> <p>&nbsp;</p> <p><a href="https://egyptianstreets.com/wp-content/uploads/2020/05/1B55AF9B-53E3-44C9-8A8E-1F8C96EFDAB6.jpeg"><img class="size-full wp-image-60627" src="https://egyptianstreets.com/wp-content/uploads/2020/05/1B55AF9B-53E3-44C9-8A8E-1F8C96EFDAB6.jpeg" alt="" width="1593" height="890" srcset="https://egyptianstreets.com/wp-content/uploads/2020/05/1B55AF9B-53E3-44C9-8A8E-1F8C96EFDAB6.jpeg 1593w, https://egyptianstreets.com/wp-content/uploads/2020/05/1B55AF9B-53E3-44C9-8A8E-1F8C96EFDAB6-300x168.jpeg 300w, https://egyptianstreets.com/wp-content/uploads/2020/05/1B55AF9B-53E3-44C9-8A8E-1F8C96EFDAB6-768x429.jpeg 768w, https://egyptianstreets.com/wp-content/uploads/2020/05/1B55AF9B-53E3-44C9-8A8E-1F8C96EFDAB6-1024x572.jpeg 1024w" sizes="(max-width: 1593px) 100vw, 1593px" /></a><br /> Traditions of Eid prayers won out in Oakville, Canada, where Sahar, Mohamed, and their sons Youssef and Yassine joined the Muslim community to pray from their cars. Photo courtesy of Sahar Yacout.</p> <p>&nbsp;</p> <p><a href="https://egyptianstreets.com/wp-content/uploads/2020/05/Z2I6yP31.jpg"><img class="size-full wp-image-60624" src="https://egyptianstreets.com/wp-content/uploads/2020/05/Z2I6yP31.jpg" alt="" width="540" height="1110" srcset="https://egyptianstreets.com/wp-content/uploads/2020/05/Z2I6yP31.jpg 540w, https://egyptianstreets.com/wp-content/uploads/2020/05/Z2I6yP31-146x300.jpg 146w, https://egyptianstreets.com/wp-content/uploads/2020/05/Z2I6yP31-498x1024.jpg 498w" sizes="(max-width: 540px) 100vw, 540px" /></a><br /> Physically apart, but still closer than ever. Mariam in London, England, and her family gathered together for Eid. Photo courtesy of Mariam Hasaballah.</p> <p>&nbsp;</p> <p><a href="https://egyptianstreets.com/wp-content/uploads/2020/05/Morocco.jpg"><img class="size-full wp-image-60634" src="https://egyptianstreets.com/wp-content/uploads/2020/05/Morocco.jpg" alt="" width="1836" height="834" srcset="https://egyptianstreets.com/wp-content/uploads/2020/05/Morocco.jpg 1836w, https://egyptianstreets.com/wp-content/uploads/2020/05/Morocco-300x136.jpg 300w, https://egyptianstreets.com/wp-content/uploads/2020/05/Morocco-768x349.jpg 768w, https://egyptianstreets.com/wp-content/uploads/2020/05/Morocco-1024x465.jpg 1024w" sizes="(max-width: 1836px) 100vw, 1836px" /></a><br /> There are some things even social distance can&#8217;t make you miss. A family in Morocco meets via video call. Photo courtesy of Mosa&#8217;ab Elshamy.</p> 
        """.trimIndent()

        val adapter = ArticleAdapter()
        recycler.adapter = adapter
        recycler.setItemViewCacheSize(20)
        HtmlParser.Builder(StringSource(source))
            .setCallback(object : HtmlParser.ParserCallbacks {
                override fun onParseFinished(list: List<Element>) {
                    adapter.submitList(list)
                    list.forEach {
                        Log.d(TAG, "onParseFinished: ${ElementType.values()[it.type]} ||| ${it.toString()}")
//                        if (it is ImageElement) {
//                            Log.d(TAG, "onImageFound: $it ||| ${it.ImageUrl}")
//                        } else if (it is IFrameElement) {
//                            Log.d(TAG, "onIFrameFound: $it ||| ${it.url}")
//                        } else if (it is BlockQuoteElement) {
//                            Log.d(TAG, "onBlockQuoteFound: ${it.data} ${it.text}")
//                        } else if (it is FigureElement) {
//                            Log.d(TAG, "onFigure: ${it.caption}  ${it.url}")
//                        }
                    }
                }

                override fun onParseError(exception: Exception) {}

            }).build()
    }


}